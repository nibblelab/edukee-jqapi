/* 
 * edukee-jqapi - Nibblelab Tecnologia LTDA - MIT license
 * https://github.com/nibblelab/edukee-jqapi
 */
var EdukeeAPI={endPoint:"https://www.edukee.com.br/api",token:"",results:{error:{},cursos:[],curso:{},curso_img:{},campos_inscricao:[]},testToken:function(e,r){var u=EdukeeAPI.endPoint+"/integracao/test?token="+EdukeeAPI.token;jQuery.ajax({type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","token="+EdukeeAPI.token)},url:u,success:function(u){"ok"==u.status?(jQuery(document).trigger("edukee:token_test_success"),void 0!=e&&e()):(EdukeeAPI.results.error=u,jQuery(document).trigger("edukee:token_test_error"),void 0!=r&&r(u))},error:function(e){EdukeeAPI.results.error=e,jQuery(document).trigger("edukee:token_test_error"),void 0!=r&&r(e)}})},getCursos:function(e,r,u,o,t,s){var d=void 0==e?"":e,n=void 0==r?"":r,i=void 0==u?"":u,c=void 0==o?"":o,k=EdukeeAPI.endPoint+"/cursos/all?page="+d+"&pageSize="+n+"&searchBy="+i+"&orderBy="+c+"&stat=A";jQuery.ajax({type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","token="+EdukeeAPI.token)},url:k,success:function(e){"ok"==e.status?(EdukeeAPI.results.cursos=e,jQuery(document).trigger("edukee:get_cursos_success"),void 0!=t&&t(e)):(EdukeeAPI.results.error=e,jQuery(document).trigger("edukee:get_cursos_error"),void 0!=s&&s(e))},error:function(e){EdukeeAPI.results.error=e,jQuery(document).trigger("edukee:get_cursos_error"),void 0!=s&&s(e)}})},getCursoImg:function(e,r,u){var o="",t="",s="";for(var d in EdukeeAPI.results.cursos.datas)if(EdukeeAPI.results.cursos.datas[d].id==e){o=EdukeeAPI.results.cursos.datas[d].nome,t=EdukeeAPI.results.cursos.datas[d].token,s=EdukeeAPI.results.cursos.datas[d].imagem;break}if(""==o||""==t||""==s){var n={status:"no",msg:"NÃ£o consegui achar o curso na listage"};return EdukeeAPI.results.error=n,jQuery(document).trigger("edukee:get_curso_img"),void(void 0!=u&&u(n))}var i=EdukeeAPI.endPoint+"/download.php?isAPI=true&tipo=curso_logo&nome="+o+"&curso="+t+"&file="+s;jQuery.ajax({type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","token="+EdukeeAPI.token)},url:i,success:function(e){"ok"==e.status?(EdukeeAPI.results.curso_img=e,jQuery(document).trigger("edukee:get_curso_img"),void 0!=r&&r(e)):(EdukeeAPI.results.error=e,jQuery(document).trigger("edukee:get_curso_img"),void 0!=u&&u(e))},error:function(e){EdukeeAPI.results.error=e,jQuery(document).trigger("edukee:get_curso_img"),void 0!=u&&u(e)}})},init:function(e){EdukeeAPI.token=e,console.log("*** Edukee API loaded *** ")}};

